<div class="w-full">
  <form
    class="w-1/4 mx-auto"
    [formGroup]="registerForm"
    (submit)="submitForm()"
  >
    <label class="form-control w-full max-w-xs">
      <input
        type="text"
        class="input input-bordered w-full max-w-xs"
        placeholder="Username"
        formControlName="username"
        [ngClass]="{
          'input-error': username?.hasError('required') && username?.dirty
        }"
      />
      @if (username?.hasError('required') && username?.dirty) {
      <div class="label">
        <span class="label-text-alt text-error">Username is required</span>
      </div>
      }
    </label>
    <label class="form-control w-full max-w-xs">
      <input
        type="password"
        class="input input-bordered w-full max-w-xs"
        placeholder="Password"
        formControlName="password"
        [ngClass]="{
          'input-error': password?.hasError('required') && password?.dirty
        }"
      />
      @if (password?.hasError('required') && password?.dirty) {
      <div class="label">
        <span class="label-text-alt text-error">Password is required</span>
      </div>
      }
    </label>

    @if (errorMessage != null) {
    <div class="label">
      <span class="label-text-alt text-error">{{ errorMessage }}</span>
    </div>
    }

    <div>
      <button class="btn btn-primary" [disabled]="!registerForm.valid">
        Register
      </button>
    </div>

    <p class="w-full text-center">Already have an account?</p>
    <p class="link w-full text-center">
      <a [routerLink]="['/auth', 'login']">Log in</a>
    </p>

    @if (submitted) {
    <div>
      <span class="mx-auto loading loading-spinner loading-lg"></span>
    </div>
    }
  </form>
</div>
