import{$ as w,A as m,Aa as x,D as u,Ha as N,I as n,Ia as V,J as o,K as d,M as C,N as h,R as a,S as b,W as c,da as L,fa as U,g as q,i as k,j as G,k as T,la as F,m as v,n as D,qa as B,sa as P,ta as _,ua as f,v as s,va as S,w as p,wa as y,xa as E,z as l,za as M}from"./chunk-3OUB5KJW.js";var g=class t{constructor(r,i){this.http=r;this.userService=i}login(r){return this.http.post("http://localhost:3000/auth/login",r).pipe(q(i=>(this.userService.saveToken(i.access_token),i)))}register(r){return this.http.post("http://localhost:3000/auth/register",r).pipe(q(i=>(this.userService.saveToken(i.access_token),i)))}static \u0275fac=function(i){return new(i||t)(T(U),T(P))};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})};var H=t=>({"input-error":t});function Y(t,r){t&1&&(n(0,"div",4)(1,"span",11),a(2,"Username is required"),o()())}function Z(t,r){t&1&&(n(0,"div",4)(1,"span",11),a(2,"Password is required"),o()())}function $(t,r){if(t&1&&(n(0,"div",4)(1,"span",11),a(2),o()()),t&2){let i=h();s(2),b(i.errorMessage)}}function ee(t,r){t&1&&(n(0,"div"),d(1,"span",12),o())}var R=class t{constructor(r,i,e){this.fb=r;this.clientService=i;this.router=e;this.loginForm=this.fb.group({username:["",[f.required]],password:["",[f.required]]})}loginForm;submitted=!1;errorMessage;get username(){return this.loginForm.get("username")}get password(){return this.loginForm.get("password")}submitForm(){this.submitted=!0,this.errorMessage=void 0,this.clientService.login(this.loginForm.value).subscribe({next:r=>{this.submitted=!1,this.router.navigate(["/"])},error:r=>{console.error(r),this.submitted=!1,r.error.statusCode===401?this.errorMessage="Invalid username or password":r.error.statusCode===500?this.errorMessage="Internal server error":this.errorMessage="An error occurred"}})}static \u0275fac=function(i){return new(i||t)(p(N),p(g),p(F))};static \u0275cmp=v({type:t,selectors:[["app-login"]],decls:18,vars:12,consts:[[1,"w-full"],[1,"w-1/4","mx-auto",3,"submit","formGroup"],[1,"w-full","max-w-xs"],["type","text","placeholder","Username","formControlName","username",1,"input","input-bordered","w-full","max-w-xs",3,"ngClass"],[1,"label"],[1,"form-control","w-full","max-w-xs"],["type","password","placeholder","Password","formControlName","password",1,"input","input-bordered","w-full","max-w-xs",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],[1,"w-full","text-center"],[1,"link","w-full","text-center"],["href","./auth/register"],[1,"label-text-alt","text-error"],[1,"mx-auto","loading","loading-spinner","loading-lg"]],template:function(i,e){i&1&&(n(0,"div",0)(1,"form",1),C("submit",function(){return e.submitForm()}),n(2,"label",2),d(3,"input",3),l(4,Y,3,0,"div",4),o(),n(5,"label",5),d(6,"input",6),l(7,Z,3,0,"div",4),o(),l(8,$,3,1,"div",4),n(9,"div")(10,"button",7),a(11," Login "),o()(),n(12,"p",8),a(13,"Don't have an account yet?"),o(),n(14,"p",9)(15,"a",10),a(16,"Register"),o()(),l(17,ee,2,0,"div"),o()()),i&2&&(s(),m("formGroup",e.loginForm),s(2),m("ngClass",c(8,H,(e.username==null?null:e.username.hasError("required"))&&(e.username==null?null:e.username.dirty))),s(),u(e.username!=null&&e.username.hasError("required")&&(e.username!=null&&e.username.dirty)?4:-1),s(2),m("ngClass",c(10,H,(e.password==null?null:e.password.hasError("required"))&&(e.password==null?null:e.password.dirty))),s(),u(e.password!=null&&e.password.hasError("required")&&(e.password!=null&&e.password.dirty)?7:-1),s(),u(e.errorMessage!=null?8:-1),s(2),m("disabled",!e.loginForm.valid),s(7),u(e.submitted?17:-1))},dependencies:[w,E,_,S,y,M,x]})};var O=t=>({"input-error":t});function te(t,r){t&1&&(n(0,"div",4)(1,"span",10),a(2,"Username is required"),o()())}function re(t,r){t&1&&(n(0,"div",4)(1,"span",10),a(2,"Password is required"),o()())}function ie(t,r){if(t&1&&(n(0,"div",4)(1,"span",10),a(2),o()()),t&2){let i=h();s(2),b(i.errorMessage)}}function ne(t,r){t&1&&(n(0,"div"),d(1,"span",11),o())}var I=class t{constructor(r,i,e){this.fb=r;this.clientService=i;this.router=e;this.registerForm=this.fb.group({username:["",[f.required]],password:["",[f.required]]})}registerForm;submitted=!1;errorMessage;get username(){return this.registerForm.get("username")}get password(){return this.registerForm.get("password")}submitForm(){this.submitted=!0,this.errorMessage=void 0,this.clientService.register(this.registerForm.value).subscribe({next:r=>{this.submitted=!1,this.router.navigate(["/"])},error:r=>{console.error(r),this.submitted=!1,r.error.statusCode===401?this.errorMessage="Invalid credentials":r.error.statusCode===409?this.errorMessage="Username already taken":r.error.statusCode===500?this.errorMessage="Internal server error":this.errorMessage="An error occurred"}})}static \u0275fac=function(i){return new(i||t)(p(N),p(g),p(F))};static \u0275cmp=v({type:t,selectors:[["app-register"]],decls:18,vars:12,consts:[[1,"w-full"],[1,"w-1/4","mx-auto",3,"submit","formGroup"],[1,"form-control","w-full","max-w-xs"],["type","text","placeholder","Username","formControlName","username",1,"input","input-bordered","w-full","max-w-xs",3,"ngClass"],[1,"label"],["type","password","placeholder","Password","formControlName","password",1,"input","input-bordered","w-full","max-w-xs",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],[1,"w-full","text-center"],[1,"link","w-full","text-center"],["href","./auth/login"],[1,"label-text-alt","text-error"],[1,"mx-auto","loading","loading-spinner","loading-lg"]],template:function(i,e){i&1&&(n(0,"div",0)(1,"form",1),C("submit",function(){return e.submitForm()}),n(2,"label",2),d(3,"input",3),l(4,te,3,0,"div",4),o(),n(5,"label",2),d(6,"input",5),l(7,re,3,0,"div",4),o(),l(8,ie,3,1,"div",4),n(9,"div")(10,"button",6),a(11," Register "),o()(),n(12,"p",7),a(13,"Already have an account?"),o(),n(14,"p",8)(15,"a",9),a(16,"Log in"),o()(),l(17,ne,2,0,"div"),o()()),i&2&&(s(),m("formGroup",e.registerForm),s(2),m("ngClass",c(8,O,(e.username==null?null:e.username.hasError("required"))&&(e.username==null?null:e.username.dirty))),s(),u(e.username!=null&&e.username.hasError("required")&&(e.username!=null&&e.username.dirty)?4:-1),s(2),m("ngClass",c(10,O,(e.password==null?null:e.password.hasError("required"))&&(e.password==null?null:e.password.dirty))),s(),u(e.password!=null&&e.password.hasError("required")&&(e.password!=null&&e.password.dirty)?7:-1),s(),u(e.errorMessage!=null?8:-1),s(2),m("disabled",!e.registerForm.valid),s(7),u(e.submitted?17:-1))},dependencies:[w,E,_,S,y,M,x]})};var oe=[{path:"login",component:R},{path:"register",component:I}],z=class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=D({type:t});static \u0275inj=G({imports:[L,V,B.forChild(oe)]})};export{z as AuthenticationModule};
