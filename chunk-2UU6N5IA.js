import{$ as F,A as l,Aa as x,D as u,Ha as N,I as o,Ia as H,J as s,K as d,M as C,N as b,R as a,S as h,V as w,W as c,da as B,fa as P,g as q,i as G,j as D,k as T,la as _,m as v,ma as S,n as U,qa as V,sa as A,ta as y,ua as f,v as n,va as E,w as p,wa as k,xa as M,z as m,za as R}from"./chunk-R36QCI57.js";var g=class r{constructor(t,i){this.http=t;this.userService=i}login(t){return this.http.post("https://deadlock-builds-backend-9514acf001ce.herokuapp.com/auth/login",t).pipe(q(i=>(this.userService.saveToken(i.access_token),i)))}register(t){return this.http.post("https://deadlock-builds-backend-9514acf001ce.herokuapp.com/auth/register",t).pipe(q(i=>(this.userService.saveToken(i.access_token),i)))}static \u0275fac=function(i){return new(i||r)(T(P),T(A))};static \u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"})};var z=r=>({"input-error":r}),$=()=>["/auth","register"];function ee(r,t){r&1&&(o(0,"div",4)(1,"span",11),a(2,"Username is required"),s()())}function re(r,t){r&1&&(o(0,"div",4)(1,"span",11),a(2,"Password is required"),s()())}function te(r,t){if(r&1&&(o(0,"div",4)(1,"span",11),a(2),s()()),r&2){let i=b();n(2),h(i.errorMessage)}}function ie(r,t){r&1&&(o(0,"div"),d(1,"span",12),s())}var I=class r{constructor(t,i,e){this.fb=t;this.clientService=i;this.router=e;this.loginForm=this.fb.group({username:["",[f.required]],password:["",[f.required]]})}loginForm;submitted=!1;errorMessage;get username(){return this.loginForm.get("username")}get password(){return this.loginForm.get("password")}submitForm(){this.submitted=!0,this.errorMessage=void 0,this.clientService.login(this.loginForm.value).subscribe({next:t=>{this.submitted=!1,this.router.navigate(["/"])},error:t=>{console.error(t),this.submitted=!1,t.error.statusCode===401?this.errorMessage="Invalid username or password":t.error.statusCode===500?this.errorMessage="Internal server error":this.errorMessage="An error occurred"}})}static \u0275fac=function(i){return new(i||r)(p(N),p(g),p(_))};static \u0275cmp=v({type:r,selectors:[["app-login"]],decls:18,vars:14,consts:[[1,"w-full"],[1,"w-1/4","mx-auto",3,"submit","formGroup"],[1,"w-full","max-w-xs"],["type","text","placeholder","Username","formControlName","username",1,"input","input-bordered","w-full","max-w-xs",3,"ngClass"],[1,"label"],[1,"form-control","w-full","max-w-xs"],["type","password","placeholder","Password","formControlName","password",1,"input","input-bordered","w-full","max-w-xs",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],[1,"w-full","text-center"],[1,"link","w-full","text-center"],[3,"routerLink"],[1,"label-text-alt","text-error"],[1,"mx-auto","loading","loading-spinner","loading-lg"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"form",1),C("submit",function(){return e.submitForm()}),o(2,"label",2),d(3,"input",3),m(4,ee,3,0,"div",4),s(),o(5,"label",5),d(6,"input",6),m(7,re,3,0,"div",4),s(),m(8,te,3,1,"div",4),o(9,"div")(10,"button",7),a(11," Login "),s()(),o(12,"p",8),a(13,"Don't have an account yet?"),s(),o(14,"p",9)(15,"a",10),a(16,"Register"),s()(),m(17,ie,2,0,"div"),s()()),i&2&&(n(),l("formGroup",e.loginForm),n(2),l("ngClass",c(9,z,(e.username==null?null:e.username.hasError("required"))&&(e.username==null?null:e.username.dirty))),n(),u(e.username!=null&&e.username.hasError("required")&&(e.username!=null&&e.username.dirty)?4:-1),n(2),l("ngClass",c(11,z,(e.password==null?null:e.password.hasError("required"))&&(e.password==null?null:e.password.dirty))),n(),u(e.password!=null&&e.password.hasError("required")&&(e.password!=null&&e.password.dirty)?7:-1),n(),u(e.errorMessage!=null?8:-1),n(2),l("disabled",!e.loginForm.valid),n(5),l("routerLink",w(13,$)),n(2),u(e.submitted?17:-1))},dependencies:[F,M,y,E,k,R,x,S]})};var J=r=>({"input-error":r}),ne=()=>["/auth","login"];function oe(r,t){r&1&&(o(0,"div",4)(1,"span",10),a(2,"Username is required"),s()())}function se(r,t){r&1&&(o(0,"div",4)(1,"span",10),a(2,"Password is required"),s()())}function ae(r,t){if(r&1&&(o(0,"div",4)(1,"span",10),a(2),s()()),r&2){let i=b();n(2),h(i.errorMessage)}}function le(r,t){r&1&&(o(0,"div"),d(1,"span",11),s())}var L=class r{constructor(t,i,e){this.fb=t;this.clientService=i;this.router=e;this.registerForm=this.fb.group({username:["",[f.required]],password:["",[f.required]]})}registerForm;submitted=!1;errorMessage;get username(){return this.registerForm.get("username")}get password(){return this.registerForm.get("password")}submitForm(){this.submitted=!0,this.errorMessage=void 0,this.clientService.register(this.registerForm.value).subscribe({next:t=>{this.submitted=!1,this.router.navigate(["/"])},error:t=>{console.error(t),this.submitted=!1,t.error.statusCode===401?this.errorMessage="Invalid credentials":t.error.statusCode===409?this.errorMessage="Username already taken":t.error.statusCode===500?this.errorMessage="Internal server error":this.errorMessage="An error occurred"}})}static \u0275fac=function(i){return new(i||r)(p(N),p(g),p(_))};static \u0275cmp=v({type:r,selectors:[["app-register"]],decls:18,vars:14,consts:[[1,"w-full"],[1,"w-1/4","mx-auto",3,"submit","formGroup"],[1,"form-control","w-full","max-w-xs"],["type","text","placeholder","Username","formControlName","username",1,"input","input-bordered","w-full","max-w-xs",3,"ngClass"],[1,"label"],["type","password","placeholder","Password","formControlName","password",1,"input","input-bordered","w-full","max-w-xs",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],[1,"w-full","text-center"],[1,"link","w-full","text-center"],[3,"routerLink"],[1,"label-text-alt","text-error"],[1,"mx-auto","loading","loading-spinner","loading-lg"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"form",1),C("submit",function(){return e.submitForm()}),o(2,"label",2),d(3,"input",3),m(4,oe,3,0,"div",4),s(),o(5,"label",2),d(6,"input",5),m(7,se,3,0,"div",4),s(),m(8,ae,3,1,"div",4),o(9,"div")(10,"button",6),a(11," Register "),s()(),o(12,"p",7),a(13,"Already have an account?"),s(),o(14,"p",8)(15,"a",9),a(16,"Log in"),s()(),m(17,le,2,0,"div"),s()()),i&2&&(n(),l("formGroup",e.registerForm),n(2),l("ngClass",c(9,J,(e.username==null?null:e.username.hasError("required"))&&(e.username==null?null:e.username.dirty))),n(),u(e.username!=null&&e.username.hasError("required")&&(e.username!=null&&e.username.dirty)?4:-1),n(2),l("ngClass",c(11,J,(e.password==null?null:e.password.hasError("required"))&&(e.password==null?null:e.password.dirty))),n(),u(e.password!=null&&e.password.hasError("required")&&(e.password!=null&&e.password.dirty)?7:-1),n(),u(e.errorMessage!=null?8:-1),n(2),l("disabled",!e.registerForm.valid),n(5),l("routerLink",w(13,ne)),n(2),u(e.submitted?17:-1))},dependencies:[F,M,y,E,k,R,x,S]})};var me=[{path:"login",component:I},{path:"register",component:L}],K=class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=U({type:r});static \u0275inj=D({imports:[B,H,V.forChild(me)]})};export{K as AuthenticationModule};
